# Apache PHP-FPM Proxy Configuration Template
# This shows how to configure different PHP versions per virtual host

# ====================================================================
# Global PHP-FPM Configuration (applies to all sites by default)
# Place in /etc/apache2/conf-available/php8.3-fpm.conf
# Enable with: a2enconf php8.3-fpm
# ====================================================================

<FilesMatch \.php$>
    SetHandler "proxy:unix:/run/php/php8.3-fpm.sock|fcgi://localhost"
</FilesMatch>

# ====================================================================
# Per-VirtualHost PHP Version Configuration Examples
# ====================================================================

# Example 1: PHP 7.4 for a specific site
# <VirtualHost *:80>
#     ServerName legacy.example.com
#     DocumentRoot /var/www/legacy
#
#     <FilesMatch \.php$>
#         SetHandler "proxy:unix:/run/php/php7.4-fpm.sock|fcgi://localhost"
#     </FilesMatch>
#
#     <Directory /var/www/legacy>
#         AllowOverride All
#         Require all granted
#     </Directory>
# </VirtualHost>

# Example 2: PHP 8.2 for a specific site
# <VirtualHost *:80>
#     ServerName modern.example.com
#     DocumentRoot /var/www/modern
#
#     <FilesMatch \.php$>
#         SetHandler "proxy:unix:/run/php/php8.2-fpm.sock|fcgi://localhost"
#     </FilesMatch>
#
#     <Directory /var/www/modern>
#         AllowOverride All
#         Require all granted
#     </Directory>
# </VirtualHost>

# Example 3: Multiple PHP versions in subdirectories
# <VirtualHost *:80>
#     ServerName multiversion.example.com
#     DocumentRoot /var/www/multiversion
#
#     # Default PHP version
#     <FilesMatch \.php$>
#         SetHandler "proxy:unix:/run/php/php8.3-fpm.sock|fcgi://localhost"
#     </FilesMatch>
#
#     # PHP 7.4 for /legacy subdirectory
#     <Directory /var/www/multiversion/legacy>
#         <FilesMatch \.php$>
#             SetHandler "proxy:unix:/run/php/php7.4-fpm.sock|fcgi://localhost"
#         </FilesMatch>
#     </Directory>
# </VirtualHost>

# ====================================================================
# Available PHP-FPM Sockets
# ====================================================================
# PHP 5.6: unix:/run/php/php5.6-fpm.sock
# PHP 7.0: unix:/run/php/php7.0-fpm.sock
# PHP 7.1: unix:/run/php/php7.1-fpm.sock
# PHP 7.2: unix:/run/php/php7.2-fpm.sock
# PHP 7.3: unix:/run/php/php7.3-fpm.sock
# PHP 7.4: unix:/run/php/php7.4-fpm.sock
# PHP 8.0: unix:/run/php/php8.0-fpm.sock
# PHP 8.1: unix:/run/php/php8.1-fpm.sock
# PHP 8.2: unix:/run/php/php8.2-fpm.sock
# PHP 8.3: unix:/run/php/php8.3-fpm.sock
# PHP 8.4: unix:/run/php/php8.4-fpm.sock

# ====================================================================
# Required Apache Modules
# ====================================================================
# - mod_proxy
# - mod_proxy_fcgi
# Enable with: a2enmod proxy proxy_fcgi
